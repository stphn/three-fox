function init(){container=document.querySelector("#world"),document.body.appendChild(container),camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,2e3),camera.position.set(2,2,3),scene=new THREE.Scene;var e=new THREE.PlaneBufferGeometry(300,300),n=new THREE.MeshPhongMaterial({transparent:!0,opacity:.03}),i=new THREE.Mesh(e,n);i.position.set(0,0,FLOOR),i.rotation.z=-Math.PI/2,i.scale.set(300,300,300),i.castShadow=!1,i.receiveShadow=!0,scene.add(i);for(var a=10,t=1,e=new THREE.Geometry,o=new THREE.LineBasicMaterial({color:13421772}),r=-a;r<=a;r+=t)e.vertices.push(new THREE.Vector3(-a,-.04,r)),e.vertices.push(new THREE.Vector3(a,-.04,r)),e.vertices.push(new THREE.Vector3(r,-.04,-a)),e.vertices.push(new THREE.Vector3(r,-.04,a));var d=new THREE.LineSegments(e,o);scene.add(dae),renderer=new THREE.WebGLRenderer({alpha:!0}),renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(window.innerWidth,window.innerHeight),renderer.shadowMap.enabled=!0,container.appendChild(renderer.domElement),stats=new Stats,container.appendChild(stats.dom);var s=new THREE.AmbientLight(4473924);scene.add(s),light=new THREE.SpotLight(15919313,1,0,Math.PI/2),light.position.set(0,0,100),light.target.position.set(0,0,0),light.castShadow=!0,light.shadow=new THREE.LightShadow(new THREE.PerspectiveCamera(60,1,2,190)),light.shadow.mapSize.width=SHADOW_MAP_WIDTH,light.shadow.mapSize.height=SHADOW_MAP_HEIGHT,scene.add(light),window.addEventListener("resize",onWindowResize,!1)}function onWindowResize(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}function animate(){requestAnimationFrame(animate),render(),stats.update()}function onDocumentMouseMove(e){mouseX=1*(e.clientX-windowHalfX),mouseY=1*(e.clientY-windowHalfY)}function render(){var e=5e-4*Date.now();camera.position.x=0,camera.position.y=0,camera.position.z=80,camera.position.x+=.05*(-mouseX-camera.position.x),camera.position.z+=.08*(mouseY-camera.position.z),camera.position.y+=.08*(mouseY-camera.position.y),dae.position.y=8e-5*(mouseY-dae.position.y),dae.position.x=8e-5*(-mouseX-dae.position.x),camera.lookAt(scene.position),THREE.AnimationHandler.update(clock.getDelta()),renderer.render(scene,camera)}Detector.webgl||Detector.addGetWebGLMessage();var container,stats,camera,scene,renderer,objects,particle1,particle2,light1,light2,light3,light4,dae,NEAR=10,FAR=1e3,FLOOR=-30,SHADOW_MAP_WIDTH=2048,SHADOW_MAP_HEIGHT=1024,mouseX=0,mouseY=0,windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2;document.addEventListener("mousemove",onDocumentMouseMove,!1);var loader=new THREE.ColladaLoader;loader.options.convertUpAxis=!0,loader.load("/model/fox.dae",function(e){dae=e.scene,dae.traverse(function(e){if(e.castShadow=!0,e.receiveShadow=!0,e instanceof THREE.SkinnedMesh){var n=new THREE.Animation(e,e.geometry.animation);n.play()}}),dae.scale.x=dae.scale.y=dae.scale.z=.06,dae.updateMatrix(),init(),animate()});var clock=new THREE.Clock;